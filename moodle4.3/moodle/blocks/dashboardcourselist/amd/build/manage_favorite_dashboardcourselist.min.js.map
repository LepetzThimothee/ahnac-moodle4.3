{"version":3,"file":"manage_favorite_dashboardcourselist.min.js","sources":["../src/manage_favorite_dashboardcourselist.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * JavaScript module for managing favorite courses in the dashboardcourselist block.\n *\n * @module block_dashboardcourselist/manage_favorite_dashboardcourselist\n * @copyright   2024 Lepetz Thimoth√©e <lepetz.timo@gmail.com>\n * @license     http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\nimport $ from 'jquery';\nimport * as Notification from 'core/notification';\nimport * as util from 'block_dashboardcourselist/course_favorite_util';\n\n/**\n * Handle click event on favorite icon.\n *\n * @param {Event} event Click event object.\n */\nconst handleFavoriteIconClick = (event) => {\n    event.preventDefault(); // Prevent default link behavior\n    const courseId = event.currentTarget.dataset.courseId;\n    const isFavorite = $(event.currentTarget).hasClass('text-yellow'); // Check if the icon has the 'text-yellow' class\n    util.setCourseFavouriteState(parseInt(courseId), !isFavorite).then(success => {\n        if (success) {\n            $(event.currentTarget).toggleClass('text-yellow text-primary'); // Toggle the classes 'text-yellow' and 'text-primary'\n            // Create and dispatch custom event\n            const favoriteChangedEvent = new CustomEvent('favoriteCourseChanged', {\n                detail: {\n                    courseId: courseId\n                }\n            });\n            document.dispatchEvent(favoriteChangedEvent);\n        } else {\n            Notification.alert('Failed to update course favorite status.');\n        }\n        return;\n    }).catch(Notification.exception);\n};\n\n/**\n * Handle removeFavoriteCourse event.\n *\n * @param {Event} event removeFavoriteCourse event object.\n */\nconst handleRemoveFavoriteCourse = (event) => {\n    const data = event.detail;\n    // Update the display based on favorite changes\n    // and accordingly update the display in the bloc_dashboardcourselist\n    const element = document.querySelector('.favorite-icon[data-course-id=\"' + data.courseId + '\"]');\n    if (element) {\n        element.classList.toggle('text-yellow');\n        element.classList.toggle('text-primary');\n    }\n};\n\n/**\n * Initialize the favorite course functionality.\n *\n * @method init\n */\nexport const init = () => {\n    // Event listener for clicking on favorite icon\n    $('.favorite-icon').on('click', (event) => handleFavoriteIconClick(event));\n    // Event listener to detect favorite changes\n    document.addEventListener('removeFavoriteCourse', handleRemoveFavoriteCourse);\n};"],"names":["handleRemoveFavoriteCourse","event","data","detail","element","document","querySelector","courseId","classList","toggle","on","preventDefault","currentTarget","dataset","isFavorite","hasClass","util","setCourseFavouriteState","parseInt","then","success","toggleClass","favoriteChangedEvent","CustomEvent","dispatchEvent","Notification","alert","catch","exception","handleFavoriteIconClick","addEventListener"],"mappings":";;;;;;;6pCAyDMA,2BAA8BC,cAC1BC,KAAOD,MAAME,OAGbC,QAAUC,SAASC,cAAc,kCAAoCJ,KAAKK,SAAW,MACvFH,UACAA,QAAQI,UAAUC,OAAO,eACzBL,QAAQI,UAAUC,OAAO,gCASb,yBAEd,kBAAkBC,GAAG,SAAUT,OA5CJA,CAAAA,QAC7BA,MAAMU,uBACAJ,SAAWN,MAAMW,cAAcC,QAAQN,SACvCO,YAAa,mBAAEb,MAAMW,eAAeG,SAAS,eACnDC,KAAKC,wBAAwBC,SAASX,WAAYO,YAAYK,MAAKC,aAC3DA,QAAS,qBACPnB,MAAMW,eAAeS,YAAY,kCAE7BC,qBAAuB,IAAIC,YAAY,wBAAyB,CAClEpB,OAAQ,CACJI,SAAUA,YAGlBF,SAASmB,cAAcF,2BAEvBG,aAAaC,MAAM,+CAGxBC,MAAMF,aAAaG,YA0BqBC,CAAwB5B,SAEnEI,SAASyB,iBAAiB,uBAAwB9B"}